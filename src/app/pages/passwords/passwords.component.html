<section class="page-controls">
  <div class="container">
    <div class="row no-gutters -between -middle">
      <div class="heading -h3">Passwords</div>
      <div class="btn-group">
        <button class="page-controls_btn btn-white -out-shadow -icon" title="{{isFoldersOpened ? 'Collapse all' : 'Expand all'}}" (click)="isFoldersOpened = !isFoldersOpened;toggleGroups();">
          <i class="icon-next" [class.-rotate180]="isFoldersOpened"></i>
        </button>
        <button class="page-controls_btn btn-white -out-shadow -icon" title="Tiles" [class.-active]="activeViewType == 'tile'" (click)="activeViewType = 'tile'">
          <i class="icon-tile"></i>
        </button>
        <button class="page-controls_btn btn-white -out-shadow -icon" title="List" [class.-active]="activeViewType == 'list'" (click)="activeViewType = 'list'">
          <i class="icon-list"></i>
        </button>
        <button class="page-controls_btn btn-primary -out-shadow" openModal data-modal="add-folder">Add folder</button>
        <button class="page-controls_btn btn-primary -out-shadow" openModal data-modal="item-modal" (click)="isAddItem = true">Add password</button>
      </div>
    </div>
  </div>
</section>
<section class="page-content">
  <div class="container">
    <div class="row no-gutters">
      <app-accordion>
        <app-accordion-group
          [heading]="folder.folderName+' ('+folder.content.length+')'"
          *ngFor="let folder of foldersData; let n = index">
          <app-content-list>
            <app-content-list-item
              *ngFor="let item of folder.content; let i = index"
              [item]="item"
              [listIndex]="n"
              [itemIndex]="i"
              [activeViewType]="activeViewType">
              <div class="page-list_info-text -first">
                <p class="name">{{ item.serviceName }}</p>
                <p class="small info-label">{{ item.userName }}</p>
              </div>
              <div class="page-list_info-text -show-large">
                <p class="small info-label">{{ item.email }}</p>
                <p class="small">{{ item.pass }}</p>
              </div>
            </app-content-list-item>
          </app-content-list>
        </app-accordion-group>
      </app-accordion>
    </div>
  </div>
</section>

<app-modal id="add-folder">
  <div class="modal">
    <div class="modal_content">
      <h1 class="heading -h2">Add Modal!</h1>
      <div class="row -column no-gutters">
        <div class="form-group">
          <label for="folderName">Folder Name:</label>
          <input class="form-control" id="folderName" type="text" name="folderName" #folderNameInput>
        </div>
      </div>
      <div class="row no-gutters -end">
        <div class="btn-group">
          <button class="btn-success" closeModal data-modal="add-folder" (click)="addEmptyFolder();">Add</button>
          <button class="btn-default" closeModal data-modal="add-folder">Cancel</button>
        </div>
      </div>
    </div>
    <button class="close-btn" closeModal data-modal="add-folder"></button>
  </div>
</app-modal>

<app-modal id="item-modal">
  <div class="modal">
    <div class="modal_content">
      <h1 class="heading -h2">Add Modal!</h1>
      <div class="row -column no-gutters">
        <div class="form-group" *ngIf="isAddItem">
          <label for="tableName">Folder:</label>
          <select name="tableName" id="tableName">
            <option value="">Table 1</option>
            <option value="">Table 2</option>
          </select>
          <ng-select
            [allowClear]="true"
            [items]="folders"
            (data)="onSelectTable($event)"
            placeholder="Choose folder"
            class="page-select">
          </ng-select>
        </div>
        <div class="form-group">
          <label for="serviceName">Service Name:</label>
          <input class="form-control" id="serviceName" type="text" name="serviceName" #serviceNameInput>
        </div>
        <div class="form-group">
          <label for="userName">User Name:</label>
          <input class="form-control" id="userName" type="text" name="userName" #userNameInput>
        </div>
        <div class="form-group">
          <label for="email">Email:</label>
          <input class="form-control" id="email" type="text" name="email" #emailInput>
        </div>
        <div class="form-group">
          <label for="link">Link:</label>
          <input class="form-control" id="link" type="text" name="link" #linkInput>
        </div>
        <div class="form-group">
          <label for="pass">Password:</label>
          <input class="form-control" id="pass" type="text" name="pass" #passInput>
        </div>
      </div>
      <div class="row no-gutters -end">
        <div class="btn-group">
          <button class="btn-success" *ngIf="isAddItem" closeModal data-modal="item-modal" (click)="onAddPassItem();">Add</button>
          <button class="btn-success" *ngIf="isEditItem" closeModal data-modal="item-modal" (click)="onEditPassItem();">Edit</button>
          <button class="btn-default" closeModal data-modal="item-modal" (click)="isAddItem = false;isEditItem = false;">Cancel</button>
        </div>
      </div>
    </div>
    <button class="close-btn" closeModal data-modal="item-modal" (click)="isAddItem = false;isEditItem = false;"></button>
  </div>
</app-modal>

<app-modal id="delete-item">
  <div class="modal">
    <div class="modal_content">
      <h1 class="heading -h4">Are you sure you want to delete this password?</h1>
      <div class="row no-gutters -end">
        <div class="btn-group">
          <button class="btn-red" closeModal data-modal="delete-item" (click)="onDeletePassItem();">Delete</button>
          <button class="btn-default" closeModal data-modal="delete-item">Cancel</button>
        </div>
      </div>
    </div>
    <button class="close-btn" closeModal data-modal="delete-item"></button>
  </div>
</app-modal>
