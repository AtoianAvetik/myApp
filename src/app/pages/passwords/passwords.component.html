<section class="page-controls">
  <div class="container">
    <div class="row no-gutters -between -middle">
      <div class="heading -h3">Passwords</div>
      <div class="btn-group">
        <button class="page-controls_btn btn-white -out-shadow -icon" title="{{isFoldersOpened ? 'Collapse all' : 'Expand all'}}" (click)="isFoldersOpened = !isFoldersOpened;toggleGroups();">
          <i class="icon-next" [class.-rotate180]="isFoldersOpened"></i>
        </button>
        <button class="page-controls_btn btn-white -out-shadow -icon" title="Tiles" [class.-active]="activeViewType == 'tile'" (click)="changeViewType('tile')">
          <i class="icon-tile"></i>
        </button>
        <button class="page-controls_btn btn-white -out-shadow -icon" title="List" [class.-active]="activeViewType == 'list'" (click)="changeViewType('list')">
          <i class="icon-list"></i>
        </button>
        <button class="page-controls_btn btn-primary -out-shadow" openModal data-modal="folder-modal" (click)="isAddFolderMode = true;">Add folder</button>
        <button class="page-controls_btn btn-primary -out-shadow" openModal data-modal="item-modal" (click)="isAddPasswordMode = true;">Add password</button>
      </div>
    </div>
  </div>
</section>
<section class="page-content">
  <div class="container">
    <div class="row no-gutters">
      <app-passwords-group [foldersData]="foldersData" [foldersList]="foldersIdArray" class="col-12"></app-passwords-group>
    </div>
  </div>
</section>

<app-modal id="folder-modal">
  <div class="modal">
    <div class="modal_content">
      <h1 class="heading -h3">Add Folder!</h1>
      <form [formGroup]="folderForm" (ngSubmit)="onSubmit()">
        <div class="row -column no-gutters">
          <div class="form-group">
            <label for="folderName">Folder Name:</label>
            <input
              class="form-control"
              id="folderName"
              type="text"
              formControlName="folderName">
          </div>
        </div>
        <div class="row no-gutters -end">
          <div class="btn-group">
            <button class="btn-success" type="submit" closeModal data-modal="folder-modal">Add</button>
            <button class="btn-default" type="button" closeModal data-modal="folder-modal" (click)="resetForms()">Cancel</button>
          </div>
        </div>
      </form>
    </div>
    <button class="close-btn" closeModal data-modal="folder-modal" (click)="resetForms()"></button>
  </div>
</app-modal>

<app-modal id="item-modal">
  <div class="modal">
    <div class="modal_content">
      <h1 class="heading -h3">{{isEditPasswordMode ? 'Edit Password' : isDeletePasswordMode ? 'Delete Password' : 'Add Password'}}</h1>
      <form [formGroup]="passwordForm" (ngSubmit)="onSubmit()">
        <h1 class="heading -h4" *ngIf="isDeletePasswordMode">Are you sure you want to delete this password?</h1>
        <div class="row -column no-gutters" *ngIf="!isDeletePasswordMode">
          <div class="form-group" *ngIf="isAddPasswordMode">
            <label for="tableName">Folder:</label>
            <select name="tableName" id="tableName">
              <option value="">Table 1</option>
              <option value="">Table 2</option>
            </select>
            <ng-select
              [allowClear]="true"
              [items]="folders"
              (data)="onSelectTable($event)"
              placeholder="Choose folder"
              class="page-select">
            </ng-select>
          </div>
          <div class="form-group">
            <label for="serviceName">Service Name:</label>
            <input
              class="form-control"
              id="serviceName"
              type="text"
              formControlName="serviceName">
          </div>
          <div class="form-group">
            <label for="userName">User Name:</label>
            <input
              class="form-control"
              id="userName"
              type="text"
              formControlName="userName">
          </div>
          <div class="form-group">
            <label for="email">Email:</label>
            <input
              class="form-control"
              id="email"
              type="text"
              formControlName="email">
          </div>
          <div class="form-group">
            <label for="url">Link:</label>
            <input
              class="form-control"
              id="url"
              type="text"
              formControlName="url">
          </div>
          <div class="form-group">
            <label for="pass">Password:</label>
            <input
              class="form-control"
              id="pass"
              type="text"
              formControlName="pass">
          </div>
        </div>
        <div class="row no-gutters -end">
          <div class="btn-group">
            <button class="btn-success" type="submit" closeModal data-modal="item-modal">{{isEditPasswordMode ? 'Edit' : isDeletePasswordMode ? 'Delete' : 'Add'}}</button>
            <button class="btn-default" type="button" closeModal data-modal="item-modal" (click)="resetForms()">Cancel</button>
          </div>
        </div>
      </form>
    </div>
    <button class="close-btn" type="button" closeModal data-modal="item-modal" (click)="resetForms()"></button>
  </div>
</app-modal>
